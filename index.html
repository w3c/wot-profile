<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8" />
  <title>Web of Things (WoT) Profile</title>
  <script class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>
  <script class="remove">
    var respecConfig = {
      lint: {
        "no-headingless-sections": false,
      },
      specStatus: "ED",
      maxTocLevel: 6,
      processVersion: 2019,
      shortName: "wot-profile",
      copyrightStart: 2020,
      group: "wg/wot",
      wgPublicList: "public-wot-wg",
      edDraftURI: "https://w3c.github.io/wot-profile/",
      githubAPI: "https://api.github.com/repos/w3c/wot-profile",
      issueBase: "https://www.github.com/w3c/wot-profile/issues",
      previousPublishDate: "2020-11-24",
      previousMaturity: "FPWD",
      editors: [{
        name: "Michael Lagally",
        w3cid: "47166",
        company: "Oracle Corp.",
        companyURL: "https://www.oracle.com/"
      },
      {
        name: "Michael McCool",
        w3cid: "93137",
        company: "Intel Corp.",
        companyURL: "https://www.intel.com/"
      },
      {
        name: "Ryuichi Matsukura",
        w3cid: "64284",
        company: "Fujitsu Ltd.",
        companyURL: "https://www.fujitsu.com/"
      },
      {
        name: "Sebastian Kaebisch",
        w3cid: "43064",
        company: "Siemens AG",
        companyURL: "https://www.siemens.com/"
      },
      {
        name: "Tomoaki Mizushima",
        w3cid: "98915",
        company: "Internet Research Institute, Inc.",
        companyURL: "https://www.iri.co.jp/"
      }],

      otherLinks: [
        {
          key: "Contributors",
          data: [{
            value: "In the GitHub repository",
            href: "https://github.com/w3c/wot-profile/graphs/contributors"
          }]
        }, {
          key: "Repository",
          data: [{
            value: "We are on GitHub",
            href: "https://github.com/w3c/wot-profile/"
          }, {
            value: "File a bug",
            href: "https://github.com/w3c/wot-profile/issues"
          }, {
            value: "Contribute",
            href: "https://github.com/w3c/wot-profile/pulls"
          }]
        }],
      localBiblio: {
        "JSON-SCHEMA": {
          title: "JSON Schema Validation: A Vocabulary for Structural Validation of JSON",
          href: "https://tools.ietf.org/html/draft-handrews-json-schema-validation-01",
          authors: ["Austin Wright", "Henry Andrews", "Geraint Luff"],
          status: "Internet-Draft",
          date: "19 March 2018",
          publisher: "IETF"
        },
        "ISO-6709": {
          title: "ISO-6709:2008 : Standard representation of geographic point location by coordinates",
          href: "https://www.iso.org/standard/39242.html",
          status: "Published",
          date: "2008-07",
          publisher: "ISO"
        }
      }
    };
  </script>
  <style>
    .rfc2119-assertion {
      background-color: rgb(230, 230, 230)
    }
  </style>

</head>

<body>
  <section id="abstract">
    <p>
      The <em>WoT Profile Specification</em> defines a Profiling Mechanism and a <em>WoT Core Profile</em>,
      which enables <em>out of the box interoperability</em>
      among things and devices. <em>Out of the box interoperability</em> implies,
      that devices can be integrated into various application scenarios without
      deep level adaptations. Typically only minor configuration operations are
      necessary (such as entering a network key, or IP address)
      to use the device in a certain scenario.
      These actions can be done by anyone without specific training.
    </p>
    The <a>WoT Core Profile</a> defines a set of <em>constraints
      and rules</em>, which compliant thing descriptions have to adopt
    to guarantee interoperability.
    </p>
    <p>
      These rules are prescriptive, to ensure that
      compliant implementations satisfy the semantic guarantees
      implied by them. We call this set of rules a <em>Profile</em>.
    </p>
    <p>
      The <strong>WoT Profile Specification</strong> as defined in
      this document serves two purposes:
    </p>
    <ul>
      <li>It defines a generic <strong>Profiling
          Mechanism</strong> which provides a mechanism to describe a
        profile in an unambiguous way. This mechanism can be
        used to define additional profiles.
      </li>
      <li>In addition, it defines a <strong><a>WoT Core
            Profile</a></strong> of the Thing Description, which
        consists of a core data model and protocol
        binding rules. The <a>WoT Core
          Profile</a> formalizes the results of several PlugFests
        that were conducted by the WoT Interest Group and of
        tests that were conducted as part of the development.
        <p>
          This document incudes a binding of the core data model to
          HTTP(S) and selected notification sub-protocols.
          The core data model can be bound to other protocols -
          it is expected that bindings to other protocols (e.g. MQTT, CoAP)
          will be defined in the near future.
        </p>
        <p>
          <span class="rfc2119-assertion" id="profile-abstract-1">
            A TD that is compliant to the <a>core profile</a> MUST adhere to
            both the constraints on the data model and the protocol binding.
          </span>
        </p>
      </li>
    </ul>
    <p>
      Devices that constrain their use of the Thing Description to
      the <a>WoT Core Profile</a> can interoperate with each other
      out-of-the-box.
    </p>
    <p>Note that the core profile is not exclusive. Device implementers are free to adopt
      other features of the thing description that go beyond the constraints
      of the core profile, however the interoperability guarantees of the core profile
      hold only for the <a>WoT Core Profile</a> subset.

    <section class="ednote">
      The name <em>WoT Core Profile</em> is still under discussion in the group and is used as a working title.
      It is subject to change after the profile specification has reached a certain level of maturity.
    </section>

    <section>
      <h3>Motivation for a Profile</h3>
    </section>

    <p>
      <span class="rfc2119-assertion" id="profile-abstract-2">
        The W3C WoT Thing Architecture [[wot-architecture]] and
        WoT Thing Description [[wot-thing-description]] define a
        powerful description mechanism and a format to describe
        myriads of very different devices, which may be connected
        over various protocols.
      </span>
      The format is very flexible and open
      and puts very few normative requirements on devices that
      implement it.
    </p>

    <p>
      However, this flexibility de-facto prevents
      interoperability, since, without additional <strong>rules</strong>,
      it allows implementers to make many choices that do not
      provide <strong>guarantees</strong> of common behavior
      between implementations.
    </p>

  </section>

  <section id='sotd'></section>

  <section id="intro">
    <!--  h1 id="w3c-web-of-things-a-wot--profile-for-http-rest">W3C Web of Things: A WoT <a>Core Profile</a> for HTTP/REST</h1-->

    <h1 id="introduction">Introduction</h1>
    <p>
      The W3C WoT Architecture [[wot-architecture]] and the WoT
      Thing Description [[wot-thing-description]]
      have been developed as a versatile format, that allows
      describing the interactions between multiple devices and
      protocols.

    </p>
    <p>
      This flexibility permits an easy integration of new device
      types and protocols, however it risks interoperability,
      since there are <em>no guarantees</em> that two devices
      which are formally spec-compliant, will be able to
      communicate.
    </p>
    <p>To increase adoption of the WoT specifications,
      interoperability between on premise devices, edge devices
      and the cloud is essential. Even if every manufacturer is
      implementing the current Thing Description specification in
      full flexibility, there is no interoperability guarantee;
      many choices are still left to the implementations and there
      are very few normative requirements that a device has to
      fulfill.</p>

    <section>
      <h3>Deployment Scenarios</h3>

      <p>A Thing Description can be used in two fundamentally
        different deployment scenarios:</p>
      <ul>
        <li>a "brown-field" scenario, where it is created
          to describe the interactions with existing systems.</li>

        <li>a "green-field" scenario, where a device model
          and a thing description are developed together.</li>
      </ul>

      <p>
        For green field deployments, where the implementations
        are being carried out and corresponding thing
        descriptions are being created, it is easier to achieve
        full interoperability by using a small, extensible <a>Core
          Profile</a>.
      </p>

      <p>In the brown field area, due to the nature of
        existing deployments and protocols, a broad spectrum of
        variations and potentially high complexity of thing
        descriptions inhibits interoperability and will most
        likely lead to additional profiles of the <a>WoT Thing Description</a>
        and domain-specific thing consumer implementations.</p>

      <p>
        The WoT <a>Core Profile</a> can be used by green field
        deployments and gives guidance to new implementers of
        the WoT specifications. It has already proved in
        brown-field scenarios in the PlugFests, where existing
        devices, that already existed as products, prototypes or
        demonstrators, were described with Thing Descriptions
        that are constrained to the <a>Core Profile</a>.
      </p>

    </section>
    <section id="why-profile">
      <h2 id="why-define-a-core-profile">
        Why a <a>Core Profile</a>?
      </h2>

      <p>
        During the recent WoT PlugFests there were many
        de-facto agreements on the use of a small constrained
        subset of interaction patterns and protocol choices.
        These de-facto agreements select a common subset of the
        <a>WoT Thing Description</a>, based on
        proven interoperability among manufacturers.
      </p>
      <p>
        The aim of this specification is to formalize these
        agreements by defining a <strong><a>WoT Core
            Profile</a></strong> based on the choices that were made by
        the implementers of PlugFest devices.
      </p>
      <p>
        <span class="rfc2119-assertion" id="profile-1.2-why-a-core-profile-1">
          The <a>WoT Core Profile</a> contains additional
          normative requirements that MUST be satisfied by devices
          to be compliant to the profile.
        </span>
      </p>
      <figure id="WoT-Core-Profile-figure">
        <img src="images/WoT Core Profile.png" class="wot-profiles" alt="WoT-Core-Profile-Picture" />
        <figcaption>WoT Core Profile - A Subset of Affordances</figcaption>
      </figure>
      <p>
        Adoption of the <a>WoT Core Profile</a> will
        significantly limit the implementation burden of device
        and cloud implementors.
      </p>
      <p>
        The <a>WoT Core Profile</a> was defined with the
        following main goals:
      </p>
      <ul>
        <li>guarantee interoperability among all
          implementations of the profile.</li>
        <li>limit the implementation complexity for
          resource constrained devices.</li>
        <li>ensure that a thing description is also useful
          for a human reader.</li>
      </ul>

      <p>It makes choices on the required metadata fields as
        well as the supported interactions and protocol
        endpoints. It introduces some constraints on data
        schemas for properties and actions which are required
        for resource constrained devices in real-world
        deployments. The format does not forbid the use of
        additional elements of the <a>WoT Thing Description</a> for vendor specific
        extensions, however this will impact interoperability.</p>
    </section>
    <section>
      <h2 id="out-of-the-box-interoperability">Out-of-the-box
        interoperability</h2>
      <p>
        Devices, which implement the <a>Core Profile</a>, are <strong>out-of-the-box
          interoperable</strong> with other <a>Core Profile</a>
        compliant devices. Furthermore, the <a>Core Profile</a>
        simplifies device validation and compliance testing
        since a corresponding conformance test suite can be
        defined.
      </p>
      <section class="note">
        It is also a goal of the <em>WoT Core Profile</em> to
        ensure that compliant files can be understood by humans
        - therefore descriptions, dates, and author fields are
        either mandatory or highly recommended.
      </section>
    </section>
    <section>
      <h2>Structure of this document</h2>
      <section class="ednote">to be added.</section>
    </section>
  </section>
  <section id="conformance">
    <p>
      A device or consumer implementation complies with this specification if it follows
      the normative statements in the present document.
    <p>
      A JSON Schema [[?JSON-SCHEMA]] to validate the compliance of a Thing Description
      with the core profile is provided in Appendix <a href="#core-profile-json-schema"></a>.
    </p>
  </section>

  <section id="terminology">
    <h2 id="x3-terminology">Terminology</h2>
    <p>This specification uses the same terminology as the WoT
      Architecture and Thing Description specifications.</p>
    <p>
      For convenience of the reader, we use the terms <em>keyword</em>
      and <em>field</em> for the linguistic notion <em>vocabulary term</em>
      as defined in the <em>Thing Description</em> Specification.
    </p>
    <p>
      We use the terms <em>device</em> and <em>thing</em> in an
      interchangeable manner.
    </p>
    <h4 id="additional-definitions-">Additional Definitions:</h4>
    <dl>
      <dt>
        <dfn>Profile</dfn>
      </dt>
      <dd>A set of prescriptive rules, to ensure that
        compliant implementations satisfy the semantic
        guarantees that are implied by them.
      <dt>
        <dfn>WoT Core Profile</dfn>
      </dt>
      <dd>The subset of the Thing Description
        defined by the present document.</dd>
      <dt>
        <dfn>Core Profile</dfn>
      </dt>
      <dd>
        Synonym for <a>WoT Core Profile</a>.
      </dd>

      <!-- dt>
        <dfn>Digital Twin Profile</dfn>
      </dt>
      <dd>A profile for defining a virtual representation of
        a thing or a group of things.</dd>
      <dt>
        <dfn>Thing Template Profile</dfn>
      </dt>
      <dd>A profile for defining a class of things that share
        the same Data Model.</dd -->

      <dfn>Core Data Model</dfn>
      </dt>
      <dd>
        A Data Model that conforms to the subset of the Thing
        Description specification as
        defined in section <a href="#wot-core-data-model"></a>.
      </dd>
      <dt>
        <dfn>Thing Description</dfn>
      </dt>
      <dd>
        Synonym for <a>WoT Thing Description</a>.
      </dd>
      <dfn>WoT Thing Description</dfn>
      </dt>
      <dd>
        The Web of Things Thing Description as defined in [[wot-thing-description]].
      </dd>


      <!--
                <dt>
                <dfn>TD Specification</dfn>
            </dt>
            <dd>
                Synonym for The WoT <a>Thing Description
                    Specification</a>.
            </dd>
            <dt>
                <dfn>Thing Description Specification</dfn>
            </dt>
            <dd>The WoT Thing Description Specification.</dd>
            <dt>
                <dfn>Thing Description</dfn>
            </dt>
            <dd>A Data Model that conforms to the Thing Description
                Specification.</dd>
            <dt>
            <dt>
                <dfn>Core Data Model</dfn>
            </dt>
            <dd>
                A Data Model that conforms to the subset of the Thing
                Description specification as
                defined in section <a href="wot-core-datamodel"></a>.
            </dd>
            <dt>

                <dfn>Core Profile</dfn>
            </dt>
            <dd>
                Synonym for <a>WoT Core Profile</a>.
            </dd>
            <dt>
                <dfn>Core TD</dfn>
            </dt>
            <dd>
                Synonym for <a>Core Thing Description</a>.
            </dd>
            <dt>
                <dfn>Core Thing Description</dfn>
            </dt>
            <dd>
                A Thing Description that conforms to the <a>Core
                    Profile</a>.
            </dd>
                <dt>
                  <dfn>WoT Thing Description</dfn>
              </dt>
              <dd>Synonym for <a>Thing Description</a>.</dd>
          </dl>
        -->
  </section>

  <!-- Profiling mechanism -->
  <section id="profiling-mechanism">
    <h2>Profiling Mechanism</h2>
    <p>
      In order to conform with a profile, a
      <a href="https://www.w3.org/TR/wot-architecture/#dfn-thing">Web Thing</a>
      MUST conform with all the normative statements in the profile's specification.
    </p>
    <p>
      In order to denote that a given
      <a href="https://www.w3.org/TR/wot-architecture/#dfn-thing">Web Thing</a>
      conforms to one or more profiles, its Thing Description MUST include a
      <a href="https://w3c.github.io/wot-thing-description/#thing">
        <code>profile</code></a> member [[wot-thing-description]]. The value of
      the <code>profile</code> member MUST be set to either a valid URI
      [[RFC3986]] identifying a single profile, or an array of valid URIs
      identifying multiple profiles.
    </p>
    <pre class="example">
    {
      "@context": "https://www.w3.org/2019/wot/td/v1",
      "id": "urn:dev:ops:32473-WoTLamp-1234",
      "profile": "https://www.w3.org/2021/wot/profile/core",
      "title": "My Lamp",
      "description": "A web connected lamp",
      ...
    }
    </pre>
    <pre class="example">
    {
      "@context": "https://www.w3.org/2019/wot/td/v1",
      "id": "urn:dev:ops:32473-WoTLamp-1234",
      "profile": [
        "https://www.w3.org/2021/wot/profile/core",
        "https://www.w3.org/2021/wot/profile/constrained"
      ],
      "title": "My Lamp",
      "description": "A web connected lamp",
      ...
    }
    </pre>
  </section>

  <!-- <a>Core Profile</a> -->
  <section id="core-profile">
    <h2>WoT Core Profile</h2>
    This section defines the <a>Core Profile</a> by defining a <a>Core
      Data Model</a> and a set of <a href="#protocol-binding">Protocol
      Binding</a> Rules.
    <section id="wot-core-data-model">
      <h2>WoT Core Data Model</h2>
      <p>
        The core data model incorporates the data model defined by chapter 5 of
        the Thing Description specification.
        The normative rules defined by that data model
        are the baseline for the definition of the core data model
        and are normative for the core data model.
        <span class="rfc2119-assertion" id="profile-5.1-wot-core-data-model-1">
          A core profile compliant implementation MUST additionally satisfy the
          requirements of this chapter.
        </span>
      </p>

      <section id="general">
        <h3 id="x5-general">General</h3>

        <p>
          The following rules are applicable to multiple
          classes of the <a>WoT Thing Description</a> Specification, as they
          provide clearer semantics, improved readability and
          simplified processing on resource constrained
          devices.
        </p>

        <section>
          <h4>Mandatory fields</h4>
          <p>
            One of the primary benefits of the <a>WoT Thing
              Description</a> over a typical IoT format is the
            additional documentation for a human reader.
          </p>
          <p>
            Therefore, the fields
            <code>title</code>
            and
            <code>description</code>
            are MANDATORY for Things, Property Affordances,
            Action Affordances, Event Affordances and Data
            Schemas.
          </p>
          <p>It is possible to have empty values for these
            fields, if, for specific purposes it is not
            desired to provide documentation, however this
            is NOT RECOMMENDED and the conscious decision is
            obvious from the TD.</p>
        </section>

        <section>
          <h4>Date format</h4>
          <p class="rfc2119-assertion" id="profile-date-format-1">
            All date and time values MUST use the canonical dateTime representation format defined in section 3.2.7 of
            [xmlschema-2].
          </p>
          As described by this section the following constraints must be observed:
          <p class="rfc2119-assertion" id="profile-date-format-2">
            All dateTime values MUST use UTC as the time zone and use the 'Z' identifier.
          </p>
          <p class="rfc2119-assertion" id="profile-date-format-3">
            A time value of 24:00 is NOT PERMITTED, the value 00:00 MUST be used instead.
          </p>
        </section>


        <section>
          <h4>Length and Value Limits</h4>
          <p>
            The length of
            <code>id</code>
            ,
            <code>description</code>
            and
            <code>descriptions</code>
            values is limited to 512 characters.
          </p>
          <p>
            The length of
            <code>title</code>
            and
            <code>titles</code>
            values is limited to 64 characters.
          </p>
          <p>
        </section>

        <p>
          <span class="rfc2119-assertion" id="profile-5.1.1.2-wot-core-data-model-length-and-value-Limits-1">
            Where a type permits using an
            <code>array of string</code>
            or a
            <code>string</code>
            , an
            <code>array of string</code>
            MUST be used.
          </span>

        <section class="ednote">
          <p>TODO: decide if multiple types and contexts are required.</p>

          <p>In this case the following section could be added:</p>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.1.2-wot-core-data-model-length-and-value-Limits-2">
              The only exception to this rule are <code>@context</code> and <code>@type</code> annotations,
              where both <code>string</code> or <code>array of string</code> MAY be used.
            </span>
          </p>
        </section>

        </p>

        <p>
          <span class="rfc2119-assertion" id="profile-5.1.1.2-wot-core-data-model-length-and-value-Limits-3">
            Where a type permits using an
            <code>array of DataSchema</code>
            or a
            <code>DataSchema</code>
            , an
            <code>array of DataSchema</code>
            MUST be used.
          </span>
        </p>
        <p>
          <span class="rfc2119-assertion" id="profile-5.1.1.2-wot-core-data-model-length-and-value-Limits-4">
            All elements of an
            <code>enum</code>
            MUST be either
            <code>string</code>
            or
            <code>number</code>
            .
          </span>
          <span class="rfc2119-assertion" id="profile-5.1.1.2-wot-core-data-model-length-and-value-Limits-5">
            Different types in a single
            <code>enum</code>
            are NOT PERMITTED.
          </span>
        </p>
        <!--  table class="def">
				<thead>
					<tr>
						<th>keyword</th>
						<th>type</th>
						<th>remarks</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>@context</td>
						<td>array of string</td>
						<td></td>
					</tr>
					<tr>
						<td>@type</td>
						<td>array of string</td>
						<td></td>
					</tr>
				</tbody>
			</table -->
      </section>

      <!-- Thing -->

      <section>
        <h2 id="thing">Thing</h2>
        The <a>Core Data Model</a> applies the following
        constraints and rules to the Thing class of section
        5.3.1.1 of the <a>WoT Thing Description</a> specification.
        <section>
          <h3>Mandatory fields</h3>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.2.1-thing-mandatory-fields-1">
              To provide minimum interoperability, the
              following metadata fields of a <a>Thing</a> MUST
              be contained in a compliant Thing Description:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>remarks</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>title</td>
                <td>string</td>
                <td>human readable documentation</td>
              </tr>
              <tr>
                <td>id</td>
                <td>urn_type</td>
                <td>a globally unique urn of the
                  thing</td>
              </tr>
              <tr>
                <td>description</td>
                <td>string</td>
                <td>human readable documentation</td>
              </tr>
              <tr>
                <td>created</td>
                <td>date</td>
                <td>human readable documentation</td>
              </tr>
              <tr>
                <td>modified</td>
                <td>date</td>
                <td>human readable documentation</td>
              </tr>
              <tr>
                <td>support</td>
                <td>urn_type</td>
                <td>human readable documentation</td>
              </tr>
              <tr>
                <td>security</td>
                <td>array of string</td>
                <td>simplified handling</td>
              </tr>
              <tr>
                <td>version</td>
                <td>VersionInfo</td>
                <td>clear versioning, easy to
                  compare different TDs</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h5 id="recommended-practice-">Recommended
            practice</h5>
          <p>It is RECOMMENDED to use the value
            &quot;&quot; for strings, where the
            value cannot be determined.</p>

          <p>
            <span class="rfc2119-assertion" id="profile-5.1.2.1-thing-mandatory-fields-2">
              If a Thing Description is used solely within
              a company, the email address of the developer
              SHOULD be used in the support field,
            </span>
            <span class="rfc2119-assertion" id="profile-5.1.2.1-thing-mandatory-fields-3">
              if the Thing Description is provided externally, a support email
              address SHOULD be used.
            </span>
          </p>

          <section class="note">
            <p>
              <span class="rfc2119-assertion" id="profile-5.1.2.1-thing-mandatory-fields-4">
                It will be evaluated whether the profile also recommends some new TD terms that may be
                introduced in TD 1.1.
              </span>
              Currently the following terms are discussed: serialNumber,
              hardwareRevision, softwareRevision, loc_latitude, loc_longitude
              loc_altitude, loc_height, and loc_depth.
              <span class="rfc2119-assertion" id="profile-5.1.2.1-mandatory-fields-5">
                If these, or some of them, are defined in the TD
                1.1 model, they may be recommended here in one of the next draft updates.
              </span>
            </p>
          </section>
        </section>
      </section>


      <!-- Data Schemas-->


      <section>
        <h3 id="data-schema">Data Schema</h3>
        <p>
          Data Schemas are used for the values of Properties,
          Action input and output parameters and Event message
          payloads. The value of a <em>Data Schema</em> can be
          a simple type (boolean, integer, number, string) or
          an instance of a structured type (array and object).
        </p>
        The <a>Core Data Model</a> applies the following
        constraints and rules to the
        <code>DataSchema</code>
        class of section 5.3.2.1 of the <a>WoT Thing Description</a>
        Specification</a>.
        <p>
          This section defines a subset of the class
          <code>DataSchema</code>
          that can be processed on resource-constrained
          devices.
        <h4 id="constraints-against-the-td-specification">Data
          Schema Constraints</h4>
        <p>
          The <a>Core Data Model</a> restricts the use of
          arrays and objects to the <strong>top level</strong>
          of Data Schemas, i.e. only a one-level hierarchy is
          permitted.
          <span class="rfc2119-assertion" id="profile-5.1.3-thing-data-schema-1">
            The members of a top level
            <code>object</code>
            or
            <code>array</code>
            MUST NOT be array or object types.
          </span>
        </p>
        <section class="note" title="RATIONALE">
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.3-thing-data-schema-2">
              This may appear as a severe limitation,
              however it is motivated by integrating with
              multiple cloud services.
            </span>
            Many enterprise services and applications are based on
            (relational) databases, where individual
            property values are stored. Of course databases
            can also store objects (e.g. encoded as a JSON
            string), however this will prevent processing by
            other enterprise applications.
          </p>
          <p>
            If a property conceptually has a deeper
            structure, such as grid of lamps with RGB
            colors, the structure can be represented in the
            keyword of the property, i.e. lamp1_color_r,
            lamp1_color_g and lamp1_color_b. A similar
            mapping can be done for arrays and hierarchical
            objects. This constraint leads to simpler Thing
            Descriptions that can be handled by very
            limited devices.
          </p>
        </section>
        <p>
          <span class="rfc2119-assertion" id="profile-5.1.3-thing-data-schema-3">
            The following fields MUST be contained in a
            DataSchema:
          </span>
        </p>
        <table class="def">
          <thead>
            <tr>
              <th>keyword</th>
              <th>type</th>
              <th>constraints</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>description</td>
              <td>human readable description</td>
            </tr>
            <tr>
              <td>type</td>
              <td>string</td>
              <td>one of boolean, integer, number,
                string, array or object</td>
            </tr>
          </tbody>
        </table>
        <p>
          <span class="rfc2119-assertion" id="profile-5.1.3-thing-data-schema-4">
            The values
            <code> object </code>
            ,
            <code> array </code> MAY only be used at the top level of a Data Schema.
          </span>
          <span class="rfc2119-assertion" id="profile-5.1.3-thing-data-schema-5">
            The type value MUST NOT be <code> null </code>.
          </span>
        </p>
      </section>


      <!-- Properties -->

      <section>
        <h3 id="x5-property-affordance">Property Affordance</h3>
        The <a>Core Data Model</a> applies the following
        constraints and rules to the
        <code>PropertyAffordance</code>
        class of section 5.3.1.3 of the <a>WoT Thing Description</a> Specification.
        <section>
          <h4>Mandatory fields</h4>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.4.1-thing-property-affordance-mandatory-fields-1">
              The following property fields MUST be contained
              in the
              <code>properties</code>
              element of a <em>Profile compliant TD</em>:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraints</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>title</td>
                <td>string</td>
                <td>unique name among all
                  properties</td>
              </tr>
              <tr>
                <td>description</td>
                <td>string</td>
                <td>human readable description</td>
              </tr>
              <tr>
                <td>type</td>
                <td>string</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.4.1-thing-property-affordance-mandatory-fields-2">
                    one of <code> boolean </code> ,
                    <code> string </code> , <code>
                                        number </code> , <code> integer
                                    </code> , <code> object </code> or <code>
                                        array </code> . The type value <code>
                                        null </code> MUST NOT be used.
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h4>Additional Constraints</h4>
          <p>
            The <em>Thing Description</em> permits arbitrary
            object depths for properties. Parsing of a
            deeply nested structure is not possible on
            resource constrained devices.
            <span class="rfc2119-assertion" id="profile-5.1.4.2-thing-property-affordance-additional-constraints-1">
              Therefore each
              property MUST NOT exceed a maximum depth
              of 5 levels of nested
              <code>array</code>
              or
              <code>object</code>
              elements. It is RECOMMENDED to keep the nesting
              of these elements below 4.
            </span>
          </p>

          <p>
            <span class="rfc2119-assertion" id="profile-5.1.4.2-thing-property-affordance-dditional-constraints-2">
              The following additional constraints MUST be
              applied to the Property Affordances of a <em>Thing
                Description</em> conforming to the <a>Core
                Profile</a>:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraint</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>const</td>
                <td>anyType</td>
                <td>
                  <span class="rfc2119-assertion"
                    id="profile-5.1.4.2-thing-property-affordance-additional-constraints-3">
                    MUST NOT be used
                  </span>
                </td>
              </tr>
              <tr>
                <td>enum</td>
                <td>array of simple type</td>
                <td>
                  <span class="rfc2119-assertion"
                    id="profile-5.1.4.2-thing-property-affordance-additional-constraints-4">
                    <em>Values</em> of enums MAY
                    only be simple types. Handling of <em>any
                      type</em> is too complex to implement
                    on resource constrained devices
                  </span>
                </td>
              </tr>
              <tr>
                <td>forms</td>
                <td>array of Forms</td>
                <td>
                  <span class="rfc2119-assertion"
                    id="profile-5.1.4.2-thing-property-affordance-additional-constraints-5">
                    The <code>Array of Form</code>
                    of each property MUST contain only a
                    <em>single endpoint</em> for each
                    operation <code>readproperty</code>
                    , <code>writeproperty</code> , <code>observeproperty</code>
                    , <code>unobserveproperty</code>.
                  </span>
                </td>
              </tr>
              <tr>
                <td>format</td>
                <td>string</td>
                <td>
                  <span class="rfc2119-assertion"
                    id="profile-5.1.4.2-thing-property-affordance-additional-constraints-6">
                    If the field <code>format</code>
                    is used, only formats defined in
                    section 7.3.1-7.3.6 of
                    [[JSON-SCHEMA]] MAY be used.
                  </span>
                </td>
              </tr>
              <tr>
                <td>oneOf</td>
                <td>string</td>
                <td>
                  <span class="rfc2119-assertion"
                    id="profile-5.1.4.2-thing-property-affordance-additional-constraints-7">
                    The DataSchema field <code>oneOf</code>
                    does not make sense for properties
                    and MUST NOT be used.
                  </span>
                </td>
              </tr>
              <tr>
                <td>uriVariables</td>
                <td>Map of DataSchema</td>
                <td>
                  <span class="rfc2119-assertion"
                    id="profile-5.1.4.2-thing-property-affordance-additional-constraints-8">
                    <code>uriVariables</code> MUST
                    NOT be used.
                  </span>
                </td>
              </tr>

            </tbody>
          </table>
        </section>

        <section>
          <h4>Recommended Practice</h4>
          <p>
            It is highly RECOMMENDED to always specify a
            <code>unit</code>
            , if a value has a metric.
            <span class="rfc2119-assertion" id="profile-5.1.4.3-thing-properties-recommended-practice-1">
              Authors of <em>Thing Descriptions</em> should be aware, that units
              that are common in their geographic region are
              not globally applicable and may lead to
              misinterpretation with drastic consequences.
            </span>
          </p>
          <p>
            The field
            <code>unit</code>
            could be used for non-decimal numeric types as
            well, e.g. a string value with binary or hex
            data (
            <code>0xCAFEBABE</code>
            ,
            <code>0b01000010</code>
            ), where the unit is
            <code>hex</code>
            or
            <code>bin</code>
            ,
            <span class="rfc2119-assertion" id="profile-5.1.4.3-thing-properties-recommended-practice-2">
              to indicate how the value should be
              interpreted. It is strongly RECOMMENDED to use
              the values
            </span>
            <code>hex</code>
            ,
            <code>oct</code>
            or
            <code>bin</code>
            in this case to achieve interoperability.
          </p>
        </section>
      </section>


      <!-- Actions -->

      <section>
        <h3 id="x5-action-affordances">Action Affordances</h3>
        The <a>Core Data Model</a> applies the following
        constraints and rules to the
        <code>ActionAffordance</code>
        class of section 5.3.1.4 of the <a>WoT Thing Description</a> Specification.

        <section>
          <h4>Mandatory fields</h4>

          <p>
            <span class="rfc2119-assertion" id="profile-5.1.5.1-thing-action-affordances-mandatory-fields-1">
              The following fields MUST be contained in an
              action element of an <a>Core Profile</a> compliant TD:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraints</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>title</td>
                <td>string</td>
                <td>unique name among all actions</td>
              </tr>
              <tr>
                <td>input</td>
                <td>array of DataSchema</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.5.1-thing-action-affordances-mandatory-fields-2">
                    all elements of the subclasses
                    objectSchema and dataSchema MUST
                    only contain simple types.
                  </span>
                </td>
              </tr>
              <tr>
                <td>output</td>
                <td>array of DataSchema</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.5.1-thing-action-affordances-mandatory-fields-3">
                    all elements of the subclasses
                    objectSchema and dataSchema MUST
                    only contain simple types.
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h4>Additional Constraints</h4>
          <p>
            The elements of the DataSchema subclasses
            ArraySchema and ObjectSchema for the fields
            <code>input</code>
            and
            <code>output</code>
            are restricted to simple types in a <a>Thing
              Description</a> conforming to the <a>Core
              Data Model</a>. Without this limitation a higher
            implementation burden would be put on resource
            constrained devices (arbitrary cascaded arrays
            and multi-level objects) which cannot be
            satisfied by all consuming devices.
          </p>

          <p>
            <span class="rfc2119-assertion" id="profile-5.1.5.2-thing-action-affordance-additional-constraints-1">
              The following additional constraints MUST be
              applied to the Interaction Affordances of a <a>Thing
                Description</a> conforming to the <a>Core
                Data Model</a>:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraint</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>forms</td>
                <td>array of Forms</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.5.2-thing-action-affordance-additional-constraints-2">
                    The <code>Array of Form</code>
                    of each action MUST contain only a <em>single</em>
                    endpoint.
                  </span>
                </td>
              </tr>
              <tr>
                <td>format</td>
                <td>string</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.5.2-thing-action-affordance-additional-constraints-3">
                    If the field <code>format</code>
                    is used, only formats defined in
                    section 7.3.1-7.3.6 of
                    [[JSON-SCHEMA]] MAY be used.
                  </span>
                </td>
              </tr>
              <tr>
                <td>oneOf</td>
                <td>string</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.5.2-thing-action-affordance-additional-constraints-4">
                    The DataSchema field <code>oneOf</code>
                    does not make sense for properties
                    and MUST NOT be used.
                  </span>
                </td>
              </tr>
              <tr>
                <td>uriVariables</td>
                <td>Map of DataSchema</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.5.2-thing-action-affordance-additional-constraints-5">
                    <code>uriVariables</code> MUST
                    NOT be used.
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <section class="ednote">
          <p>TODO:</p>
          <p>- no optional parameters</p>
          <p>- timeout</p>
        </section>


        <section>
          <h4>Recommended Practice</h4>
        </section>
      </section>


      <!-- Events -->


      <section>
        <h3 id="x5-event-affordance">Event Affordance</h3>
        The <a>Core Data Model</a> applies the following
        constraints and rules to the
        <code>EventAffordance</code>
        class of section 5.3.1.5 of the <a>WoT Thing Description</a> Specification.

        <p>
          <span class="rfc2119-assertion" id="profile-5.1.6-thing-event-affordance-1">
            A <a>Thing</a> may provide more than one event
            mechanism to enable a variety of consumers.
          </span>
        </p>

        <section class="ednote">
          <p>TODO:</p>
          <p>The events section needs to be signifcantly extended and define addtional constraints to ensure OOTBI.
            LongPoll, WebSockets and WebHooks can be considered as initial candidates for supported protocols for the
            event mechanism
            to identify appropriate <em>data model</em> constraints.
          </p>
          <p>
            The individual <em>protocol constraints</em> need to be defined in a respective
            protocol binding chapter after they have been identified/evaluated in plugfests.</p>
        </section>

        <section>
          <h4>Mandatory fields</h4>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.6.1-thing-event-affordance-mandatory-fields-1">
              The following fields MUST be present in an event
              element of a <em>Core TD</em>:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraints</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>title</td>
                <td>string</td>
                <td>unique name among all events</td>
              </tr>
              <tr>
                <td>description</td>
                <td>string</td>
                <td>human readable description</td>
              </tr>
              <tr>
                <td>data</td>
                <td>set of DataSchema instances in
                  a JSON object</td>
                <td>only the DataSchema subclasses
                  booleanSchema, IntegerSchema,
                  NumberSchema, StringSchema are
                  permitted</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section>
          <h4>Additional Constraints</h4>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.6.2-thing-event-affordance-additional-constrains-1">
              The following additional constraints MUST be
              applied to the Event Affordances of a <a>WoT Thing
                Description</a> conforming to the profile:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraint</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>forms</td>
                <td>array of Forms</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.6.2-thing-event-affordance-additional-constrains-2">
                    The <code>Array of Form</code>
                    of each event MUST contain only a <em>single</em>
                    endpoint.
                  </span>
                </td>
              </tr>
              <tr>
                <td>uriVariables</td>
                <td>Map of DataSchema</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.6.2-thing-event-affordance-additional-constrains-3">
                    <code>uriVariables</code> MUST
                    NOT be used.
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>

      <!-- Forms -->


      <section>
        <h3 id="forms">Forms</h3>
        <p>
          <span class="rfc2119-assertion" id="profile-5.1.7-thing-forms-1">
            A <a>Thing</a> may provide more than one event
            mechanism to enable a variety of consumers.
          </span>
        </p>
        <section>
          <h4>Mandatory fields</h4>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.7.1-thing-forms-mandatory-fields-1">
              The following fields MUST be present in a form
              element of a <em>Core TD</em>:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraints</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>title</td>
                <td>string</td>
                <td>unique name among all events</td>
              </tr>
              <tr>
                <td>description</td>
                <td>string</td>
                <td>human readable description</td>
              </tr>
              <tr>
                <td>data</td>
                <td>set of DataSchema instances in
                  a JSON object</td>
                <td>only the DataSchema subclasses
                  booleanSchema, IntegerSchema,
                  NumberSchema, StringSchema are
                  permitted</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section>
          <h4>Additional Constraints</h4>
          <p>
            <span class="rfc2119-assertion" id="profile-5.1.7.2-thing-forms-additional-constraints-1">
              The following additional constraints MUST be
              applied to the Form elements of a <a>WoT Thing
                Description</a> conforming to the <a>Core
                profile</a>:
            </span>
          </p>
          <table class="def">
            <thead>
              <tr>
                <th>keyword</th>
                <th>type</th>
                <th>constraint</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>security</td>
                <td>string or Array of string</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.7.2-thing-forms-additional-constraints-2">
                    <code>security</code> at form
                    level MUST NOT be used.
                  </span>
                </td>
              </tr>
              <tr>
                <td>scopes</td>
                <td>string or Array of string</td>
                <td>
                  <span class="rfc2119-assertion" id="profile-5.1.7.2-thing-forms-additional-constraints-3">
                    <code>scopes</code> MUST NOT be
                    used.
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>

      <!-- Links -->

      <section>
        <h3 id="links">Links</h3>
        <section class="ednote">TODO: Consider
          selecting a defined set from [[RFC8288]].</section>

        <p>
          The "type" relationship as defined in chapter 6 of
          [[RFC6903]] is reserved for indicating an instance
          relationship between a thing and a thing template.
          The <a>Core Data Model</a> does not put additional
          constraints or requirements on links. The
          interpretation of a link is out of scope.
        </p>
      </section>

      <!--  Security -->

      <section>
        <h3 id="security">Security</h3>
        <p>
          <span class="rfc2119-assertion" id="profile-5.1.9-thing-security-1">
            The <a>Core Data Model</a> defines a subset of the
            security schemes that MAY be implemented on resource
            constrained devices.
          </span>
          <span class="rfc2119-assertion" id="profile-5.1.9-thing-security-2">
            A security scheme MUST be
            defined at the thing level.
          </span>
          <span class="rfc2119-assertion" id="profile-5.1.9-thing-security-3">
            The security scheme is
            applied to the thing as a whole, a thing may adopt
            multiple security schemes.
          </span>
        </p>
        <p>
          The set of security schemes supported in the <a>Core
            Data Model</a> is based on the PlugFest results.
          <span class="rfc2119-assertion" id="profile-5.1.9-thing-security-4">
            To ensure interoperability, a TD consumer, which
            compliant with the <a>Core Data Model</a> MUST
            support <strong>all</strong> of the following security schemes:
          </span>
        </p>

        <ul>
          <li>no security</li>
          <li>Basic Auth</li>
          <li>Digest</li>
          <li>Bearer Token</li>
          <li>Oauth2</li>
        </ul>

        <section>
          <h4>Recommended Practice</h4>
          <p>When using the "no security" or "Basic Auth"
            security schemes it is strongly recommended to
            use transport layer encryption.</p>
        </section>
      </section>
    </section>

    <!-- Protocol Binding -->
    <section id="protocol-binding">
      <h3>Protocol Binding</h3>
      <p>
        This section defines a protocol binding which describes how a
        <a href="https://www.w3.org/TR/wot-architecture/#dfn-consumer">Consumer</a>
        communicates with a
        <a href="https://www.w3.org/TR/wot-architecture/#dfn-thing">Web Thing</a>
        [[wot-architecture]] using JSON [[JSON]] payloads over
        the HTTP [[HTTP11]] protocol.
      </p>
      <p>
        <span class="rfc2119-assertion" id="profile-5.2-thing-protocol-binding-1">
          A Consumer or Web Thing conforming to the WoT Core Profile
          MUST implement this protocol binding.
        </span>
      </p>
      <section id="properties">
        <h4>Properties</h4>
        <section id="readproperty">
          <h5><code>readproperty</code></h5>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-1">
            The URL of a <code>Property</code> resource to be used when reading
            the value of a property MUST be obtained from a Thing Description by
            locating a
            <a href="https://www.w3.org/TR/wot-thing-description/#form">
              <code>Form</code></a> inside the corresponding
            <a href="https://www.w3.org/TR/wot-thing-description/#propertyaffordance">
              <code>PropertyAffordance</code></a>
            for which:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-2">
            <li>
              After defaults have been applied, its <code>op</code> member
              contains the value <code>readproperty</code>
            </li>
            <li>
              After being resolved against a base URL where applicable, the
              <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                scheme</a> [[RFC3986]] of the value of its <code>href</code>
              member is <code>http</code> or <code>https</code>
            </li>
          </ul>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-3">
            The resolved value of the <code>href</code> member MUST then be used
            as the URL of the <code>Property</code> resource.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-4">
            In order to read the value of a property, a Consumer MUST send
            an HTTP request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-5">
            <li>Method set to <code>GET</code></li>
            <li>URL set to the URL of the <code>Property</code> resource</li>
            <li><code>Accept</code> header set to <code>application/json
              </code></li>
          </ul>
          <pre class="example">
          GET /things/lamp/properties/on HTTP/1.1
          Host: mythingserver.com
          Accept: application/json
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-6">
            If a Web Thing receives an HTTP request following the format
            above and the Consumer has permission to read the corresponding
            property, then upon successfully reading the value of the property
            it MUST send an HTTP response with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readproperty-7">
            <li>Status code set to <code>200</code></li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li>A body with the value of the property serialized in JSON</li>
          </ul>
          <pre class="example">
          HTTP/1.1 200 OK
          Content-Type: application/json
          false
          </pre>
        </section>
        <section id="writeproperty">
          <h5><code>writeproperty</code></h5>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-1">
            The URL of a <code>Property</code> resource to be used when writing
            the value of a property MUST be obtained from a Thing Description by
            locating a
            <a href="https://www.w3.org/TR/wot-thing-description/#form">
              <code>Form</code></a> inside the corresponding
            <a href="https://www.w3.org/TR/wot-thing-description/#propertyaffordance">
              <code>PropertyAffordance</code></a>
            for which:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-2">
            <li>
              After defaults have been applied, its <code>op</code> member
              contains the value <code>writeproperty</code>
            </li>
            <li>
              After being resolved against a base URL where applicable, the
              <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                scheme</a> [[RFC3986]] of the value of its <code>href</code>
              member is <code>http</code> or <code>https</code>
            </li>
          </ul>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-3">
            The resolved value of the <code>href</code> member MUST then be used
            as the URL of the <code>Property</code> resource.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-4">
            In order to write the value of a property, a Consumer MUST send
            an HTTP request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-5">
            <li>Method set to <code>PUT</code></li>
            <li>URL set to the URL of the <code>Property</code> resource</li>
            <li><code>Accept</code> header set to <code>application/json
              </code></li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li>A body with a requested new value for the property serialized
              in JSON</li>
          </ul>
          <pre class="example">
          PUT /things/lamp/properties/on HTTP/1.1
          Host: mythingserver.com
          Content-Type: application/json
          Accept: application/json
          true
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-6">
            If a Web Thing receives an HTTP request following the format
            above and the Consumer has permission to write the corresponding
            property, then upon successfully writing the value of the
            property it MUST send an HTTP response with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writeproperty-7">
            <li>Status code set to <code>204</code></li>
          </ul>
          <pre class="example">
          HTTP/1.1 204 No Content
          </pre>
        </section>
        <section id="readallproperties">
          <h5><code>readallproperties</code></h5>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-1">
            The URL of a <code>Properties</code> resource to be used when
            reading the value of all properties at once MUST be obtained from a
            Thing Description by locating a
            <a href="https://www.w3.org/TR/wot-thing-description/#form">
              <code>Form</code></a> inside the top level
            <a href="https://www.w3.org/TR/wot-thing-description/#form-serialization-json">
              <code>forms</code></a> member
            for which:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-2">
            <li>
              Its <code>op</code> member contains the value
              <code>readallproperties</code>
            </li>
            <li>
              After being resolved against a base URL where applicable, the
              <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                scheme</a> [[RFC3986]] of the value of its <code>href</code>
              member is <code>http</code> or <code>https</code>
            </li>
          </ul>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-3">
            The resolved value of the <code>href</code> member MUST then be used
            as the URL of the <code>Properties</code> resource.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-3">
            In order to read the value of all properties, a Consumer MUST send
            an HTTP request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-4">
            <li>Method set to <code>GET</code></li>
            <li>URL set to the URL of the <code>Properties</code> resource
            </li>
            <li><code>Accept</code> header set to <code>application/json
              </code></li>
          </ul>
          <pre class="example">
          GET /things/lamp/properties HTTP/1.1
          Host: mythingserver.com
          Accept: application/json
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-5">
            If a Web Thing receives an HTTP request following the format
            above, then upon successfully reading the values of all the
            readable properties to which the Consumer has permission to
            access, it MUST send an HTTP response with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-readallproperties-6">
            <li>Status code set to <code>200</code></li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li>A body with the values of all readable properties serialized
              in JSON, as an object keyed by property name</li>
          </ul>
          <pre class="example">
          HTTP/1.1 200 OK
          Content-Type: application/json
          {
            "on": false,
            "level": 100
          }
          </pre>
        </section>
        <section id="writemultipleproperties">
          <h5><code>writemultipleproperties</code></h5>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writemultipleproperties-1">
            The URL of a <code>Properties</code> resource to be used when
            writing the value of multiple properties at once MUST be obtained
            from a Thing Description by locating a
            <a href="https://www.w3.org/TR/wot-thing-description/#form">
              <code>Form</code></a> inside the top level
            <a href="https://www.w3.org/TR/wot-thing-description/#form-serialization-json">
              <code>forms</code></a> member
            for which:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writemultipleproperties-2">
            <li>
              Its <code>op</code> member contains the value
              <code>writemultipleproperties</code>
            </li>
            <li>
              After being resolved against a base URL where applicable, the
              <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                scheme</a> [[RFC3986]] of the value of its <code>href</code>
              member is <code>http</code> or <code>https</code>
            </li>
          </ul>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writemultipleproperties-3">
            The resolved value of the <code>href</code> member MUST then be used
            as the URL of the <code>Properties</code> resource.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writemultipleproperties-4">
            In order to write the value of multiple properties at once, a
            Consumer MUST send an HTTP request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writemultipleproperties-5">
            <li>Method set to <code>PUT</code></li>
            <li>URL set to the URL of the <code>Properties</code> resource
            </li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li><code>Accept</code> header set to <code>application/json
              </code></li>
            <li>A body with requested new values for the writable properties
              serialized in JSON, as an object keyed by property name</li>
          </ul>
          <pre class="example">
          PUT /things/lamp/properties HTTP/1.1
          Host: mythingserver.com
          Content-Type: application/json
          Accept: application/json
          {
            "on": true,
            "level": 50
          }
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-properties-writemultipleproperties-6">
            If a Web Thing receives an HTTP request following the format
            above, then upon successfully writing the values of the requested
            writable properties it MUST send an HTTP response with:
          <ul>
            <li>Status code set to <code>204</code></li>
          </ul>
          </p>
          <pre class="example">
          HTTP/1.1 204 No Content
          </pre>
        </section>
        <section class="ednote">
          <p>
            Other operations under consideration include
            <code>observeproperty</code>, <code>unobserveproperty</code>,
            <code>observeallproperties</code> and
            <code>unobserveallproperties</code>.
          </p>
          <p>
            These operations would require consesus on a default observe
            mechanism for HTTP (e.g. Server Sent Events or WebSockets).
          </p>
          <p>
            <code>readmultipleproperties</code> is currently excluded due to
            the complexities of the request payload format and because it
            doesn't add much functionality over <code>readproperty</code> and
            <code>readallproperties</code>.
            <code>writeallproperties</code> is currently excluded because it
            is just a special case of <code>writemultipleproperties</code>.
          </p>
        </section>
      </section>
      <section id="actions">
        <h4>Actions</h4>
        <section id="invokeaction">
          <h5><code>invokeaction</code></h5>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-1">
            The URL of an <code>Action</code> resource to be used when invoking
            an action MUST be obtained from a Thing Description by locating a
            <a href="https://www.w3.org/TR/wot-thing-description/#form">
              <code>Form</code></a> inside the corresponding
            <a href="https://www.w3.org/TR/wot-thing-description/#actionaffordance">
              <code>ActionAffordance</code></a>
            for which:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-2">
            <li>
              After defaults have been applied, the value of its
              <code>op</code> member is <code>invokeaction</code>
            </li>
            <li>
              After being resolved against a base URL where applicable, the
              <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                scheme</a> [[RFC3986]] of the value of its <code>href</code>
              member is <code>http</code> or <code>https</code>
            </li>
          </ul>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-3">
            The resolved value of the <code>href</code> member MUST then be used
            as the URL of the <code>Action</code> resource.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-4">
            In order to invoke an action on a Web Thing, a Consumer MUST send
            an HTTP request to the Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-5">
            <li>Method set to <code>POST</code></li>
            <li>URL set to the URL of the <code>Action</code> resource</li>
            <li><code>Accept</code> header set to <code>application/json
              </code></li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li>A body with an input to the action, if any, serialized in
              JSON</li>
          </ul>
          <pre class="example">
          POST /things/lamp/actions/fade HTTP/1.1
          Host: mythingserver.com
          Content-Type: application/json
          Accept: application/json
          {
            "level": 100,
            "duration": 5
          }
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-6">
            If a Web Thing receives an HTTP request following the format
            above then it MUST respond with one of three response formats:
          </p>
          <ol class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-7">
            <li>
              <a href="#sync-action-response">Synchronous Action Response</a>
            </li>
            <li>
              <a href="#async-action-response">Asynchronous Action Response</a>
            </li>
            <li>
              <a href="#error-responses">Error Response</a>
            </li>
          </ol>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-8">
            For long-running actions which are not expected to finish executing
            within the timeout period of an HTTP request (e.g. 30 to 120
            seconds), it is RECOMMENDED that a Web Thing respond with an
            Asynchronous Action Response so that a Consumer may continue to
            monitor the status of an action request with a
            <code>queryaction</code> operation on a dynamically created
            <code>ActionStatus</code> resource, after the initial
            <code>invokeaction</code> response.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-9">
            For short-lived actions which are expected to finish executing
            within the timeout period of an HTTP request, a Web Thing MAY wait
            until the action has completed to send a Synchronous Action
            Response.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-10">
            If a Web Thing encounters an error in attempting to execute an
            action before responding to the <code>invokeaction</code> request,
            then it MUST send an Error Response.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-11">
            Conforming Consumers MUST support all three types of response
            to the initial <code>invokeaction</code> request, but
            support for subsequent operations on an <code>ActionStatus</code>
            resource is OPTIONAL.
          </p>

          <h6 id="ActionStatus"><code>ActionStatus</code> object</h6>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-12">
            The status of an action invocation request is represented by an
            <code>ActionStatus</code> object which includes the following
            members:
          </p>

          <table class="def">
            <thead>
              <tr>
                <th>Member</th>
                <th>Description</th>
                <th>Assignment</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              <tr class="rfc2119-table-assertion">
                <td><code>status</code></td>
                <td>The status of the action request.</td>
                <td>mandatory</td>
                <td>
                  <a href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string">
                    <code>string</code></a> (one of <code>pending</code>,
                  <code>running</code>, <code>completed</code> or
                  <code>failed</code>)
                </td>
              </tr>
              <tr class="rfc2119-table-assertion">
                <td><code>output</code></td>
                <td>
                  The output data, if any, of a completed action which
                  MUST conform with the <code>output</code> data schema of the
                  corresponding
                  <a href="https://www.w3.org/TR/wot-thing-description/#actionaffordance">
                    <code>ActionAffordance</code></a>.
                </td>
                <td>optional</td>
                <td>any type</td>
              </tr>
              <tr class="rfc2119-table-assertion">
                <td><code>error</code></td>
                <td>
                  An error message, if any, associated with a failed action
                  which MUST conform with the Problem Details format
                  [[RFC7807]] (only needed in response to a
                  <a href="#queryaction"><code>queryaction</code></a>
                  operation).
                </td>
                <td>optional</td>
                <td><code>object</code></td>
              </tr>
              <tr class="rfc2119-table-assertion">
                <td><code>href</code></td>
                <td>
                  The [[URL]] of an <code>ActionStatus</code> resource which can
                  be polled with a <code>queryaction</code> operation to get
                  the latest status of the action, the
                  <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                    scheme</a> [[RFC3986]] of which MUST resolve to
                  <code>http</code> or <code>https</code> (only needed for an
                  <a href="#async-action-response">Asynchronous Action
                    Response</a>).
                </td>
                <td>optional</td>
                <td><code>string</code></td>
              </tr>
            </tbody>
          </table>

          <h6 id="sync-action-response">Synchronous Action Response</h6>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-13">
            If providing a Synchronous Action Response, a Web Thing MUST send
            an HTTP response with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-14">
            <li>Status code set to <code>200</code></li>
            <li><code>Content-Type</code> header set to
              <code>application/json</code>
            </li>
            <li>A body containing an <a href="#ActionStatus">
                <code>ActionStatus</code></a> object serialized
              in JSON</li>
          </ul>
          <pre class="example">
            HTTP/1.1 200 OK
            Content-Type: application/json
            {
              "status": "completed"
            }
          </pre>

          <h6 id="async-action-response">Asynchronous Action Response</h6>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-15">
            If providing an Asynchronous Action Response, a Web Thing MUST send
            an HTTP response containing the URL of an <code>ActionStatus</code>
            resource, the
            <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
              scheme</a> [[RFC3986]] of which MUST resolve to <code>http</code>
            or <code>https</code>. The response MUST have:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-invokeaction-16">
            <li>Status code set to <code>201</code></li>
            <li><code>Content-Type</code> header set to
              <code>application/json</code>
            </li>
            <li>
              <code>Location</code> header set to the URL of the
              <code>ActionStatus</code> resource
            </li>
            <li>A body containing an <a href="#ActionStatus">
                <code>ActionStatus</code></a> object serialized
              in JSON, with its <code>href</code> member set to the URL
              of the <code>ActionStatus</code> resource
            </li>
          </ul>
          <pre class="example">
            HTTP/1.1 201 CREATED
            Content-Type: application/json
            Location: /things/lamp/actions/fade/123e4567-e89b-12d3-a456-426655
            {
              "status": "pending",
              "href": "/things/lamp/actions/fade/123e4567-e89b-12d3-a456-426655"
            }
          </pre>
        </section>

        <section id="queryaction">
          <h5><code>queryaction</code></h5>
          <p>
            A <code>queryaction</code> operation is used to query the current
            state of an ongoing action request.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-1">
            A Web Thing which provides <a href="#async-action-response">
              Asynchronous Action Response</a>s to an <code>invokeaction</code>
            operation on an <code>Action</code> MUST also support
            <code>queryaction</code> operations on
            that same <code>Action</code>.
            A Web Thing which only provides <a href="#sync-action-response">
              Synchronous Action Response</a>s to an <code>invokeaction</code>
            operation on an <code>Action</code> SHOULD NOT support
            <code>queryaction</code> operations on that same
            <code>Action</code>.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-2">
            The URL of an <code>ActionStatus</code> resource to be used in a
            <code>queryaction</code> operation MUST be obtained from the
            <code>Location</code> header of an <a href="#async-action-response">
              Asynchronous Action Response</a>, or the <code>href</code> member of
            the <code>ActionStatus</code> object in its body.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-3">
            In order to query the status of an action request, a Consumer MUST
            send an HTTP request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-4">
            <li>Method set to <code>GET</code></li>
            <li>
              URL set to the URL of the <code>ActionStatus</code> resource
            </li>
            <li>
              <code>Accept</code> header set to <code>application/json
              </code>
            </li>
          </ul>
          <pre class="example">
          GET /things/lamp/actions/fade/123e4567-e89b-12d3-a456-426655
          Host: mythingserver.com
          Accept: application/json
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-5">
            If a Web Thing receives an HTTP request following the format
            above and the Consumer has permission to query the corresponding
            <code>ActionStatus</code> resource, then upon successfully reading
            the status of the action request it MUST send an HTTP response
            with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-6">
            <li>Status code set to <code>200</code></li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li>A body containing an <code>ActionStatus</code> object
              representing the current status of the action request, serialized
              in JSON</li>
          </ul>
          <pre class="example">
            HTTP/1.1 200 OK
            Content-Type: application/json
            {
              "status": "running"
            }
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryaction-7">
            If the queried action failed to execute, then the
            <code>status</code> member of the <code>ActionStatus</code> object
            MUST be set to <code>"failed"</code> and the <code>error</code>
            member may optionally provide additional error information
            conforming to the Problem Details format [[RFC7807]].
          </p>
          <pre class="example">
            HTTP/1.1 200 OK
            Content-Type: application/json
            {
              "status": "failed",
              "error": {
                "type": "https://mythingserver.com/docs/errors/invalid-level",
                "title": "Invalid value for level provided",
                "invalid-params": [
                  {
                    "name": "level",
                    "reason": "Must be a valid number between 0 and 100",
                  }
                ]
              }
            }
          </pre>
        </section>

        <section id="cancelaction">
          <h5><code>cancelaction</code></h5>
          <p>
            A <code>cancelaction</code> operation is used to cancel an ongoing
            <code>Action</code> request.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-cancelaction-1">
            A Web Thing which provides <a href="#async-action-response">
              Asynchronous Action Response</a>s to an <code>invokeaction</code>
            operation on an <code>Action</code> MAY also support
            <code>cancelaction</code> operations on
            that same <code>Action</code>.
            A Web Thing which only provides <a href="#sync-action-response">
              Synchronous Action Response</a>s to an <code>invokeaction</code>
            operation on an <code>Action</code> SHOULD NOT support
            <code>cancelaction</code> operations on that same
            <code>Action</code>.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-cancelaction-2">
            The URL of an <code>ActionStatus</code> resource to be used in a
            <code>cancelaction</code> operation MUST be obtained from the
            <code>Location</code> header of an <a href="#async-action-response">
              Asynchronous Action Response</a>, or the <code>href</code> member of
            the <code>ActionStatus</code> object in its body.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-cancelaction-3">
            In order to cancel an action request, a Consumer MUST send an HTTP
            request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-cancelaction-4">
            <li>Method set to <code>DELETE</code></li>
            <li>
              URL set to the URL of the <code>ActionStatus</code> resource
            </li>
          </ul>
          <pre class="example">
            DELETE /things/lamp/actions/fade/123e4567-e89b-12d3-a456-426655 HTTP/1.1
            Host: mythingserver.com
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-cancelaction-5">
            If a Web Thing receives an HTTP request following the format
            above and the Consumer has permission to cancel the corresponding
            <code>Action</code> request, then upon successfully cancelling
            <code>Action</code> it MUST send an HTTP response with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-cancelaction-6">
            <li>Status code set to <code>204</code></li>
          </ul>
          <pre class="example">
            HTTP/1.1 204 No Content
          </pre>
        </section>

        <section id="queryallactions">
          <h5><code>queryallactions</code></h5>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-1">
            The URL of an <code>Actions</code> resource to be used when
            querying the status of all ongoing action requests MUST be obtained
            from a Thing Description by locating a
            <a href="https://www.w3.org/TR/wot-thing-description/#form">
              <code>Form</code></a> inside the top level
            <a href="https://www.w3.org/TR/wot-thing-description/#form-serialization-json">
              <code>forms</code></a> member
            for which:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-2">
            <li>
              Its <code>op</code> member contains the value
              <code>queryallactions</code>
            </li>
            <li>
              After being resolved against a base URL where applicable, the
              <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                scheme</a> [[RFC3986]] of the value of its <code>href</code>
              member is <code>http</code> or <code>https</code>
            </li>
          </ul>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-3">
            The resolved value of the <code>href</code> member MUST then be used
            as the URL of the <code>Actions</code> resource.
          </p>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-4">
            In order to query the status of all ongoing action requests, a
            Consumer MUST send an HTTP request to a Web Thing with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-5">
            <li>Method set to <code>GET</code></li>
            <li>URL set to the URL of the <code>Actions</code> resource
            </li>
            <li><code>Accept</code> header set to <code>application/json
              </code></li>
          </ul>
          <pre class="example">
          GET /things/lamp/actions HTTP/1.1
          Host: mythingserver.com
          Accept: application/json
          </pre>
          <p class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-6">
            If a Web Thing receives an HTTP request following the format
            above, then upon successfully retreiving the status of all ongoing
            action requests to which the Consumer has permission to access, it
            MUST send an HTTP response with:
          </p>
          <ul class="rfc2119-assertion" id="core-profile-protocol-binding-actions-queryallactions-7">
            <li>Status code set to <code>200</code></li>
            <li><code>Content-Type</code> header set to <code>application/json
              </code></li>
            <li>A body containing an object, keyed by <code>Action</code> name,
              with the value of each object member being an array of
              <a href="#ActionStatus"><code>ActionStatus</code></a> objects
              representing the action requests, serialized in JSON.
            </li>
          </ul>
          <pre class="example">
          HTTP/1.1 200 OK
          Content-Type: application/json
          {
            "fade": [
              {
                "status": "completed",
                "href": "/things/lamp/actions/fade/123e4567-e89b-12d3-a456-426655"
              },
              {
                "status": "failed",
                "href": "/things/lamp/actions/fade/123e4567-e89b-12d3-a456-558329",
              },
              {
                "status": "running",
                "href": "/things/lamp/actions/fade/123e4567-e89b-12d3-a457-434656"
              },
              {
                "status": "pending",
                "href": "/things/lamp/actions/fade/123e4567-e89b-12d3-a457-ea9519"
              }
            ]
          }
          </pre>
        </section>

        <section class="note" title="Retention of ActionStatus objects">
          When an <code>Action</code> request is cancelled with a
          <code>cancelaction</code> operation, its <code>ActionStatus</code>
          object is deleted and need not be retained. For all other
          <code>Action</code> requests it is assumed that a Web Thing will
          store the <code>ActionStatus</code> object so that its status may
          later be queried with a <code>queryaction</code> or
          <code>queryallactions</code> operation. It is not expected that
          <code>ActionStatus</code> objects should be retained indefinitely,
          they may be stored in volatile memory and/or periodically pruned.
          The length of time for which to retain <code>ActionStatus</code>
          objects is expected to be implementation-specific and may depend on
          application-specific requirements or resource constraints.
        </section>
      </section>

      <section id="events">
        <h4>Events</h4>
        <p>
          The Core Profile defines two different event mechanisms to send notifications from things to consumers.
        </p>
        <ul>
          <li>Server-Sent Events [[EVENTSOURCE]]</li>
          <li>Webhooks </li>
        </ul>
        <p>
          If a device contains event affordances, it MUST implement at least one of these event mechanisms.
          It depends on the deployment scenarios, which mechanism is more suitable to use.
          Whereas Server-Sent Events are most suitable for deployments with only a limited number of things,
          WebHooks are scaling to cloud scenarios, where hundreds or thousands devices are connected to the cloud.
        </p>




        <section id="sse-events">
          <h4>Server-Sent Events</h4>
          <p>
            The Server-Sent Events [[EVENTSOURCE]] is a
            mechanism for Consumers to subscribe to events emitted by a Web Thing.
          </p>
          <p class="note">
            Consumers are not required to implement the
            <a href="https://www.w3.org/TR/eventsource/#the-eventsource-interface">
              <code>EventSource</code>
              JavaScript API</a> from the Server-Sent Events
            specification in order to conform with this profile. Any programming
            language may be used to consume an event stream.
          </p>
          <section id="subscribeevent">
            <h5><code>subscribeevent</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-1">
              The URL of an <code>Event</code> resource to be used when
              subscribing to an event MUST be obtained from a Thing Description
              by locating a
              <a href="https://www.w3.org/TR/wot-thing-description/#form">
                <code>Form</code></a> inside the corresponding
              <a href="https://www.w3.org/TR/wot-thing-description/#eventaffordance">
                <code>EventAffordance</code></a> for which:
            </p>
            <ul class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-2">
              <li>
                After defaults have been applied, its <code>op</code> member
                contains the value <code>subscribeevent</code>
              </li>
              <li>
                After being resolved against a base URL where applicable, the
                <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                  scheme</a> [[RFC3986]] of the value of its <code>href</code>
                member is <code>http</code> or <code>https</code>
              </li>
              <li>Its <code>subprotocol</code> member has a value of
                <code>"sse"</code>
              </li>
            </ul>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-3">
              The resolved value of the <code>href</code> member MUST then be used
              as the URL of the <code>Event</code> resource.
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-4">
              In order to subscribe to an event, a Consumer MUST follow the
              Server-Sent Events [[EVENTSOURCE]] specification to open a
              connection with the Web Thing at the URL of the <code>Event</code>
              resource.
            </p>
            <p>
              This involves the Consumer sending an HTTP request to
              the Web Thing with:
            </p>
            <ul>
              <li>Method set to <code>GET</code></li>
              <li>URL set to the URL of the <code>Event</code> resource</li>
              <li>
                <code>Accept</code> header set to <code>text/event-stream</code>
              </li>
              <li>
                <code>Connection</code> header set to <code>keep-alive</code>
              </li>
            </ul>
            <pre class="example">
          GET /things/lamp/events/overheated HTTP/1.1
          Host: mythingserver.com
          Accept: text/event-stream
          Connection: keep-alive
          </pre>
            <p class="note" title="Opening a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be initiated using the <code>EventSource</code>
              constructor.
            <pre class="example">
              const overheatedEventSource = new EventSource('/things/lamp/events/overheated');
            </pre>
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-5">
              If a Web Thing receives an HTTP request following the format
              above and the Consumer has permission to subscribe to the
              corresponding event, then it MUST follow the Server-Sent Events
              [[EVENTSOURCE]] specification to maintain an open connection with
              the Consumer and push event data to the Consumer as events of the
              specified type are emitted.
            </p>
            <p>
              This involves the Web Thing initially sending an HTTP
              response to the Consumer with:
            </p>
            <ul>
              <li>Status code set to <code>200</code></li>
              <li>
                <code>Content-Type</code> header set to
                <code>text/event-stream</code>
              </li>
            </ul>
            <pre class="example">
          HTTP/1.1 200 OK
          Content-Type: text/event-stream
          </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-6">
              Whenever an event of the specified type occurs while the Web Thing
              has an open connection with a Consumer, the Web Thing MUST
              send event data to the Consumer using the event stream format in the
              Server-Sent Events [[EVENTSOURCE]] specification. For each message
              sent, the Web Thing MUST set the <code>event</code> field to the
              name of the <code>EventAffordance</code> and populate the
              <code>data</code> field with event data, if any. The
              event data MUST follow the data schema specified in the
              <code>EventAffordance</code> and MUST be serialized in JSON.
              The <code>id</code> field SHOULD be set to a unique identifier for
              the event, for use when re-establishing a dropped connection (see
              below).
            </p>
            <pre class="example">
            event: overheated\n
            data: 90\n
            id: 12345\n\n
          </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-7">
              If the connection between the Consumer and Web Thing drops
              (except as a result of the <code>unsubscribe</code> operation
              defined below), the Consumer MUST re-establish the connection
              following the steps outlined in the Server-Sent Events specification
              [[EVENTSOURCE]]. Once the connection is re-established the Web Thing
              SHOULD, if possible, send any missed events which occured since
              the last event specified by the Consumer in a
              <code>Last-Event-ID</code> header.
            </p>
          </section>

          <section id="unsubscribeevent">
            <h5><code>unsubscribeevent</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-unsubscribeevent-1">
              In order to unsubscribe from an event, a Consumer MUST terminate
              the corresponding Server-Sent Events connection with the Web Thing
              as specified in the Server-Sent Events specification
              [[EVENTSOURCE]].
            </p>
            <p class="note" title="Terminating a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be terminated using the <code>close()</code> method
              on an <code>EventSource</code> [[EVENTSOURCE]] object.
            <pre class="example">
              overheatedEventSource.close();
            </pre>
            </p>
          </section>

          <section id="subscribeallevents">
            <h5><code>subscribeallevents</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-1">
              The URL of an events resource to be used when subscribing to all
              events emitted by a Web Thing MUST be obtained from a Thing
              Description by locating a
              <a href="https://www.w3.org/TR/wot-thing-description/#form">
                <code>Form</code></a> inside the top level
              <a href="https://www.w3.org/TR/wot-thing-description/#form-serialization-json"><code>forms</code></a>
              member of a Thing Description for which:
            </p>
            <ul class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-2">
              <li>
                Its <code>op</code> member contains the value
                <code>subscribeallevents</code>
              </li>
              <li>
                After being resolved against a base URL where applicable, the
                <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                  scheme</a> [[RFC3986]] of the value of its <code>href</code>
                member is <code>http</code> or <code>https</code>
              </li>
              <li>Its <code>subprotocol</code> member has a value of
                <code>"sse"</code>
              </li>
            </ul>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-3">
              The resolved value of the <code>href</code> member MUST then be used
              as the URL of the events resource.
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-2">
              In order to subscribe to all events emitted by a Web Thing, a
              Consumer MUST follow the Server-Sent Events [[EVENTSOURCE]]
              specification to open a connection with the Web Thing at the URL of
              the events resource.
            </p>
            <p>
              This involves the Consumer sending an HTTP request to
              the Web Thing with:
            </p>
            <ul>
              <li>Method set to <code>GET</code></li>
              <li>URL set to the URL of the events resource</li>
              <li>
                <code>Accept</code> header set to <code>text/event-stream</code>
              </li>
              <li>
                <code>Connection</code> header set to <code>keep-alive</code>
              </li>
            </ul>
            <pre class="example">
            GET /things/lamp/events HTTP/1.1
            Host: mythingserver.com
            Accept: text/event-stream
            Connection: keep-alive
          </pre>
            <p class="note" title="Opening a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be initiated using the <code>EventSource</code>
              constructor.
            <pre class="example">
              const lampEventsSource = new EventSource('/things/lamp/events');
            </pre>
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-3">
              If a Web Thing receives an HTTP request following the format
              above then it MUST follow the Server-Sent Events
              [[EVENTSOURCE]] specification to maintain an open connection with
              the Consumer and push event data to the Consumer for all event
              types for which it has permission to subscribe.
            </p>
            <p>
              This involves the Web Thing initially sending an HTTP
              response to the Consumer with:
            </p>
            <ul>
              <li>Status code set to <code>200</code></li>
              <li>
                <code>Content-Type</code> header set to
                <code>text/event-stream</code>
              </li>
            </ul>
            <pre class="example">
            HTTP/1.1 200 OK
            Content-Type: text/event-stream
          </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-4">
              Whenever an event occurs while the Web Thing has an open connection
              with a Consumer, the Web Thing MUST send event data to the Consumer
              using the event stream format in the Server-Sent Events
              [[EVENTSOURCE]] specification. For each message sent, the Web Thing
              MUST set the <code>event</code> field to the
              name of the <code>EventAffordance</code> and populate the
              <code>data</code> field with event data, if any. The
              event data MUST follow the data schema specified in the
              <code>EventAffordance</code> and MUST be serialized in JSON.
              The <code>id</code> field SHOULD be set to a unique identifier for
              the event, for use when re-establishing a dropped connection (see
              below).
            </p>
            <pre class="example">
            event: overheated\n
            data: 90\n
            id: 12345\n\n
          </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-5">
              If the connection between the Consumer and Web Thing drops
              (except as a result of the <code>unsubscribeallevents</code>
              operation defined below), the Consumer MUST re-establish the
              connection following the steps outlined in the Server-Sent Events
              specification [[EVENTSOURCE]]. Once the connection is re-established
              the Web Thing SHOULD, if possible, send any missed events which
              occured since the last event specified by the Consumer in a
              <code>Last-Event-ID</code> header.
            </p>
          </section>

          <section id="unsubscribeallevents">
            <h5><code>unsubscribeallevents</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-unsubscribeallevents-1">
              In order to unsubscribe from all events, a Consumer MUST terminate
              the corresponding Server-Sent Events connection with the events
              endpoint of the Web Thing, following the steps specified in the
              Server-Sent Events specification [[EVENTSOURCE]].
            </p>
            <p class="note" title="Terminating a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be terminated using the <code>close()</code> method
              on an <code>EventSource</code> [[EVENTSOURCE]] object.
            <pre class="example">
              lampEventsSource.close();
            </pre>
            </p>
          </section>

        </section>



        <!---  Webhooks  -->

        <section id="Webhooks">
          <h4>Webhooks</h4>
          <p>
            Webhooks are a notification mechanism for Consumers to subscribe
            to events emitted by a Web Thing.
            The basic principle is a server initiated push connection to consumers,
            where it is up to the discretion of the web thing to decide when a connection 
            is established and message data is sent. This mechanism enables Web Things, 
            that are residing behind a firewall to sned messages to a consumer on the public Internet.
          </p>

          <!-- subscribeevent -->

          <section id="subscribeevent">
            <h5><code>subscribeevent</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeevent-1">
              The URL of an <code>Event</code> resource to be used when
              subscribing to an event MUST be obtained from a Thing Description
              by locating a
              <a href="https://www.w3.org/TR/wot-thing-description/#form">
                <code>Form</code></a> inside the corresponding
              <a href="https://www.w3.org/TR/wot-thing-description/#eventaffordance">
                <code>EventAffordance</code></a> for which:
            </p>
            <ul class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeevent-2">
              <li>
                After defaults have been applied, its <code>op</code> member
                contains the value <code>subscribeevent</code>
              </li>
              <li>
                After being resolved against a base URL where applicable, the
                <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                  scheme</a> [[RFC3986]] of the value of its <code>href</code>
                member is <code>http</code> or <code>https</code>
              </li>
              <li>Its <code>subprotocol</code> member has a value of
                <code>"sse"</code>
              </li>
            </ul>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-swebhook-subscribeevent-3">
              The resolved value of the <code>href</code> member MUST then be used
              as the URL of the <code>Event</code> resource.
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeevent-4">
              In order to subscribe to an event, a Consumer MUST follow the
              Server-Sent Events [[EVENTSOURCE]] specification to open a
              connection with the Web Thing at the URL of the <code>Event</code>
              resource.
            </p>
            <p>
              This involves the Consumer sending an HTTP request to
              the Web Thing with:
            </p>
            <ul>
              <li>Method set to <code>GET</code></li>
              <li>URL set to the URL of the <code>Event</code> resource</li>
              <li>
                <code>Accept</code> header set to <code>text/event-stream</code>
              </li>
              <li>
                <code>Connection</code> header set to <code>keep-alive</code>
              </li>
            </ul>
            <pre class="example">
      GET /things/lamp/events/overheated HTTP/1.1
      Host: mythingserver.com
      Accept: text/event-stream
      Connection: keep-alive
      </pre>
            <p class="note" title="Opening a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be initiated using the <code>EventSource</code>
              constructor.
            <pre class="example">
          const overheatedEventSource = new EventSource('/things/lamp/events/overheated');
        </pre>
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeevent-5">
              If a Web Thing receives an HTTP request following the format
              above and the Consumer has permission to subscribe to the
              corresponding event, then it MUST follow the Server-Sent Events
              [[EVENTSOURCE]] specification to maintain an open connection with
              the Consumer and push event data to the Consumer as events of the
              specified type are emitted.
            </p>
            <p>
              This involves the Web Thing initially sending an HTTP
              response to the Consumer with:
            </p>
            <ul>
              <li>Status code set to <code>200</code></li>
              <li>
                <code>Content-Type</code> header set to
                <code>text/event-stream</code>
              </li>
            </ul>
            <pre class="example">
      HTTP/1.1 200 OK
      Content-Type: text/event-stream
      </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeevent-6">
              Whenever an event of the specified type occurs while the Web Thing
              has an open connection with a Consumer, the Web Thing MUST
              send event data to the Consumer using the event stream format in the
              Server-Sent Events [[EVENTSOURCE]] specification. For each message
              sent, the Web Thing MUST set the <code>event</code> field to the
              name of the <code>EventAffordance</code> and populate the
              <code>data</code> field with event data, if any. The
              event data MUST follow the data schema specified in the
              <code>EventAffordance</code> and MUST be serialized in JSON.
              The <code>id</code> field SHOULD be set to a unique identifier for
              the event, for use when re-establishing a dropped connection (see
              below).
            </p>
            <pre class="example">
        event: overheated\n
        data: 90\n
        id: 12345\n\n
      </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeevent-7">
              If the connection between the Consumer and Web Thing drops
              (except as a result of the <code>unsubscribe</code> operation
              defined below), the Consumer MUST re-establish the connection
              following the steps outlined in the Server-Sent Events specification
              [[EVENTSOURCE]]. Once the connection is re-established the Web Thing
              SHOULD, if possible, send any missed events which occured since
              the last event specified by the Consumer in a
              <code>Last-Event-ID</code> header.
            </p>
          </section>

           <!-- unsubscribeevent -->

          <section id="unsubscribeevent">
            <h5><code>unsubscribeevent</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-unsubscribeevent-1">
              In order to unsubscribe from an event, a Consumer MUST terminate
              the corresponding Server-Sent Events connection with the Web Thing
              as specified in the Server-Sent Events specification
              [[EVENTSOURCE]].
            </p>
            <p class="note" title="Terminating a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be terminated using the <code>close()</code> method
              on an <code>EventSource</code> [[EVENTSOURCE]] object.
            <pre class="example">
          overheatedEventSource.close();
        </pre>
            </p>
          </section>

          <!-- subscribeall -->
          <section id="subscribeallevents">
            <h5><code>subscribeallevents</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeallevents-1">
              The URL of an events resource to be used when subscribing to all
              events emitted by a Web Thing MUST be obtained from a Thing
              Description by locating a
              <a href="https://www.w3.org/TR/wot-thing-description/#form">
                <code>Form</code></a> inside the top level
              <a href="https://www.w3.org/TR/wot-thing-description/#form-serialization-json"><code>forms</code></a>
              member of a Thing Description for which:
            </p>
            <ul class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeallevents-2">
              <li>
                Its <code>op</code> member contains the value
                <code>subscribeallevents</code>
              </li>
              <li>
                After being resolved against a base URL where applicable, the
                <a href="https://tools.ietf.org/html/rfc3986#section-3.1">URI
                  scheme</a> [[RFC3986]] of the value of its <code>href</code>
                member is <code>http</code> or <code>https</code>
              </li>
              <li>Its <code>subprotocol</code> member has a value of
                <code>"sse"</code>
              </li>
            </ul>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeallevents-3">
              The resolved value of the <code>href</code> member MUST then be used
              as the URL of the events resource.
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-webhook-subscribeallevents-2">
              In order to subscribe to all events emitted by a Web Thing, a
              Consumer MUST follow the Server-Sent Events [[EVENTSOURCE]]
              specification to open a connection with the Web Thing at the URL of
              the events resource.
            </p>
            <p>
              This involves the Consumer sending an HTTP request to
              the Web Thing with:
            </p>
            <ul>
              <li>Method set to <code>GET</code></li>
              <li>URL set to the URL of the events resource</li>
              <li>
                <code>Accept</code> header set to <code>text/event-stream</code>
              </li>
              <li>
                <code>Connection</code> header set to <code>keep-alive</code>
              </li>
            </ul>
            <pre class="example">
        GET /things/lamp/events HTTP/1.1
        Host: mythingserver.com
        Accept: text/event-stream
        Connection: keep-alive
      </pre>
            <p class="note" title="Opening a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be initiated using the <code>EventSource</code>
              constructor.
            <pre class="example">
          const lampEventsSource = new EventSource('/things/lamp/events');
        </pre>
            </p>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-3">
              If a Web Thing receives an HTTP request following the format
              above then it MUST follow the Server-Sent Events
              [[EVENTSOURCE]] specification to maintain an open connection with
              the Consumer and push event data to the Consumer for all event
              types for which it has permission to subscribe.
            </p>
            <p>
              This involves the Web Thing initially sending an HTTP
              response to the Consumer with:
            </p>
            <ul>
              <li>Status code set to <code>200</code></li>
              <li>
                <code>Content-Type</code> header set to
                <code>text/event-stream</code>
              </li>
            </ul>
            <pre class="example">
        HTTP/1.1 200 OK
        Content-Type: text/event-stream
      </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-4">
              Whenever an event occurs while the Web Thing has an open connection
              with a Consumer, the Web Thing MUST send event data to the Consumer
              using the event stream format in the Server-Sent Events
              [[EVENTSOURCE]] specification. For each message sent, the Web Thing
              MUST set the <code>event</code> field to the
              name of the <code>EventAffordance</code> and populate the
              <code>data</code> field with event data, if any. The
              event data MUST follow the data schema specified in the
              <code>EventAffordance</code> and MUST be serialized in JSON.
              The <code>id</code> field SHOULD be set to a unique identifier for
              the event, for use when re-establishing a dropped connection (see
              below).
            </p>
            <pre class="example">
        event: overheated\n
        data: 90\n
        id: 12345\n\n
      </pre>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-subscribeallevents-5">
              If the connection between the Consumer and Web Thing drops
              (except as a result of the <code>unsubscribeallevents</code>
              operation defined below), the Consumer MUST re-establish the
              connection following the steps outlined in the Server-Sent Events
              specification [[EVENTSOURCE]]. Once the connection is re-established
              the Web Thing SHOULD, if possible, send any missed events which
              occured since the last event specified by the Consumer in a
              <code>Last-Event-ID</code> header.
            </p>
          </section>

          <section id="unsubscribeallevents">
            <h5><code>unsubscribeallevents</code></h5>
            <p class="rfc2119-assertion" id="core-profile-protocol-binding-events-unsubscribeallevents-1">
              In order to unsubscribe from all events, a Consumer MUST terminate
              the corresponding Server-Sent Events connection with the events
              endpoint of the Web Thing, following the steps specified in the
              Server-Sent Events specification [[EVENTSOURCE]].
            </p>
            <p class="note" title="Terminating a connection using JavaScript">
              For Consumers implemented in JavaScript [[ECMASCRIPT]] and executed
              in a runtime which exposes the
              <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface">
                <code>EventSource</code></a> interface, a Server-Sent Events
              connection can be terminated using the <code>close()</code> method
              on an <code>EventSource</code> [[EVENTSOURCE]] object.
            <pre class="example">
          lampEventsSource.close();
        </pre>
            </p>
          </section>

        </section>



        <!--- End of Webhooks-->






      </section>

      <section id="error-responses">
        <h4>Error Responses</h4>
        <p>
          <span class="rfc2119-assertion" id="profile-5.2.4-thing-protocol-binding-error-responses-1">
            If any of the operations defined above are unsuccessful then
            the Web Thing MUST send an HTTP response with an HTTP error code which
            describes the reason for the failure. It is RECOMMENDED that error
            responses use one of the following HTTP error codes:
          </span>
        </p>
        <ul>
          <li><code>400 Bad Request</code></li>
          <li><code>401 Unauthorized</code></li>
          <li><code>403 Forbidden</code></li>
          <li><code>404 Not Found</code></li>
          <li><code>500 Internal Server Error</code></li>
        </ul>
        <p>
          <span class="rfc2119-assertion" id="profile-5.2.4-thing-protocol-binding-error-responses-2">
            Web Things MAY respond with other valid HTTP error codes
            (e.g. <code>418 I'm a teapot</code>),
          </span>
          <span class="rfc2119-assertion" id="profile-5.2.4-thing-protocol-binding-error-responses-3">
            but Consumers MAY interpret those error codes as a generic <code>4xx</code> or <code>5xx</code>
            error with no special defined behaviour.
          </span>
        </p>
        <p class="ednote">
          <span class="rfc2119-assertion" id="profile-5.2.4-thing-protocol-binding-error-responses-4">
            If we define the finite set of error responses as above then we
            should also define what a Consumer should do if it receives a 3xx
            redirect type response.
          </span>
        </p>
        <p>
          <span class="rfc2119-assertion" id="profile-5.2.4-thing-protocol-binding-error-responses-5">
            If an HTTP error response contains a body, the content of that body
            MUST conform with with the Problem Details format [[RFC7807]].
          </span>
        </p>
      </section>
    </section>

    <!-- External Representation -->
    <section id="external-representation">
      <h2 id="external-td-representations">External TD
        representations</h2>
      <p>
        <span class="rfc2119-assertion" id="profile-5.3-exteanal-td-representations-1">
          The default representation is JSON. Semantic
          annotations based on JSON-LD MAY be present but are not
          required to perform all interactions with the thing
          instance.
        </span>
      </p>

      <section id="canonical-representation">
        <h2 id="canonical-td-representations">Canonical TD
          representation</h2>
        <p>
          A canonical representation serves multiple purposes.
          It is simplifying the parsing process, enables to identify
          equivalent TDs by simple string comparisons.
          Furthermore it allows the use of a simple signing mechanism,
          such as <a href="https://w3c-ccg.github.io/ld-proofs/">Linked Data Proofs</a> or JSON Web Signatures
          [[RFC7515]] and enables
          identity checks on encrypted TDs.
        </p>
        <p>
          The canonical JSON representation format of a TD adopts the JSON Canonicalization Scheme (JCS) defined by
          <a href="https://tools.ietf.org/html/rfc8785>RFC-8785</a> including errata <a href="
            https://www.rfc-editor.org/errata/eid6292">6292</a>.
        </p>
      </section>



      <!--  Normative References

		<section>
			<h2 id="normative-references">Normative references</h2>
			<p>
				urn_type = a valid URN as defined in <a
					href=https://tools.ietf.org/rfc/rfc2141.txt>RFC2141</a>
			</p>
			<p>
				uri_type = a valid URI as defined by <a
					href=https://tools.ietf.org/rfc/rfc3986.txt>RFC3986</a>
			</p>
			<p>
				identifier = a valid ECMAScript identifier name as defined in
				chapter 11.6 of <a
					href=http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf>ECMAScript</a>
			</p>
			<p>
				number = a valid ECMAScript number as defined in chapter 20.1 of <a
					href=http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf>ECMAScript</a>
			</p>
			<p>
				string = a valid ECMAScript string literal as defined in chapter
				11.8.4 of <a
					href=http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf>ECMAScript</a>
			</p>
			<p>
				date = a valid ECMAScript date as defined in chapter '20.3.1.16 Date
				Time String Format' of <a
					href=http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf>ECMAScript</a>
			</p>
			<p>(https://tools.ietf.org/html/rfc6068).</p>
		</section -->
    </section>
    <section id="open-issues">
      <h3>Open Issues</h3>
      <ul>
        <li>define action semantics</li>
        <li>define subscription mechanism</li>
        <li>Examples</li>
      </ul>
    </section>

    <section id="core-profile-json-schema" class="appendix normative">
      <h1>JSON Schema of the Core Profile</h1>
      <p>
        A Thing Description can be syntactically validated with the JSON Schema [[?JSON-SCHEMA]] for compliance with
        the core profile.
      </p>
      <p class="ednote">
        Todo: Define a JSON-SCHEMA.
      </p>

</body>

</html>